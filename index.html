<!DOCTYPE html>
<html lang="th">
  <head>
    <base target="_top" />
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <title>Manowzab Command Center V3.0.0 (API Saver)</title>

    <!-- Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div class="header">
      <div class="header-controls">
        <div class="status-cluster">
          <span id="stat-db" class="status-item" title="‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"
            ><i class="fa-solid fa-database"></i
          ></span>
          <span id="stat-api" class="status-item" title="‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ YouTube API"
            ><i class="fa-brands fa-youtube"></i
          ></span>
          <span id="stat-chat" class="status-item" title="‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡πÅ‡∏ä‡∏ó"
            ><i class="fa-solid fa-comments"></i
          ></span>
          <span id="stat-key" class="key-indicator" title="API Key"
            ><i class="fa-solid fa-key"></i> 1</span
          >
        </div>

        <!-- Voice Button Removed -->
        <button
          class="btn btn-ai inactive"
          id="btnAICommander"
          onclick="window.toggleAICommander()"
        >
          ü§ñ AI: ‡∏õ‡∏¥‡∏î
        </button>
        <button class="btn btn-dark" onclick="window.openHistory()">üïí</button>
        <button
          id="btn-shipping"
          class="btn btn-shipping empty"
          onclick="window.openDashboard()"
        >
          üöö (0)
        </button>

        <input
          type="text"
          id="vidInput"
          class="input-id"
          placeholder="Video ID"
        />
        <button
          class="btn btn-primary"
          id="btnConnect"
          onclick="window.toggleConnection()"
        >
          CONNECT
        </button>

        <div class="dropdown">
          <button class="btn btn-sim" onclick="window.toggleDropdown(event)">
            ‚ö° Tools <i class="fa-solid fa-caret-down"></i>
          </button>
          <div id="toolsDropdown" class="dropdown-content">
            <!-- [NEW] ‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏ä‡∏ó -->
            <a onclick="window.downloadChatCSV()" style="color: #ffd700"
              ><i class="fa-solid fa-file-csv"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏ä‡∏ó (CSV)</a
            >

            <a onclick="window.testVoice()">üîä ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á</a>
            <a onclick="window.toggleFullScreen()">üì∫ ‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠ (iPad)</a>
            <a onclick="window.toggleAwayMode()">üåô ‡πÇ‡∏´‡∏°‡∏î‡∏û‡∏≤‡∏•‡∏π‡∏Å‡∏ô‡∏≠‡∏ô</a>
            <a onclick="window.toggleSimulation()" id="menuSim"
              >‚ö° ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÅ‡∏ä‡∏ó</a
            >
            <a onclick="window.askAiKey()">üîë ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ API Key</a>
          </div>
        </div>
      </div>

      <div class="header-info">
        <div class="status-dot" id="status-dot"></div>
        <div class="live-viewers" id="view-counter">üëÅÔ∏è 0</div>
        <div class="live-title" id="live-title">Offline Mode</div>
        <div class="version-badge" style="margin-left: auto">V3.0.0</div>
      </div>
    </div>

    <div id="awayBanner" class="away-banner">
      <span>üåô ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏û‡∏≤‡∏•‡∏π‡∏Å‡∏ô‡∏≠‡∏ô</span>
      <span id="awayTimer" class="away-timer">00:00</span>
      <button class="away-btn" onclick="window.toggleAwayMode()">
        ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß
      </button>
    </div>

    <div class="main-container">
      <div class="stock-panel" id="stockPanel">
        <div class="stock-header">
          <div style="display: flex; align-items: center; gap: 10px">
            <input
              type="number"
              id="stockSize"
              value="70"
              style="
                width: 60px;
                background: #333;
                border: none;
                color: white;
                text-align: center;
                border-radius: 4px;
                padding: 5px;
              "
              onchange="window.saveStockSize(this.value)"
            />
            <span style="font-size: 0.8em; color: #aaa">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
            <button class="btn btn-dark" onclick="window.adjustGridZoom(-0.1)">
              -
            </button>
            <button class="btn btn-dark" onclick="window.adjustGridZoom(0.1)">
              +
            </button>
          </div>
          <div class="stock-stats">
            ‡∏à‡∏≠‡∏á <span id="sold-count" class="stat-sold">0</span> /
            <span id="total-count">70</span>
          </div>
          <button class="btn btn-dark" onclick="window.clearAllStock()">
            üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á
          </button>
        </div>
        <div class="stock-grid" id="stockGrid"></div>
      </div>

      <div class="chat-panel">
        <div class="tools-bar">
          <button
            class="btn btn-mute active"
            id="btnSound"
            onclick="window.toggleSound()"
          >
            üîä ‡πÄ‡∏™‡∏µ‡∏¢‡∏á: ‡πÄ‡∏õ‡∏¥‡∏î
          </button>
          <button class="btn btn-dark" onclick="window.resetVoice()">
            üîá Reset
          </button>
          <div style="margin-left: auto; display: flex; gap: 2px">
            <button class="btn btn-dark" onclick="window.adjustZoom(-2)">
              A-
            </button>
            <button class="btn btn-dark" onclick="window.adjustZoom(2)">
              A+
            </button>
          </div>
        </div>
        <div id="chat-viewport">
          <div id="chat-list"></div>
        </div>
        <button
          id="btn-scroll-down"
          class="scroll-bottom-btn"
          onclick="window.scrollToBottom()"
        >
          ‚¨áÔ∏è ‡πÅ‡∏ä‡∏ó‡πÉ‡∏´‡∏°‡πà
        </button>
      </div>

      <div id="dashboard" class="dashboard-overlay">
        <div class="dashboard-header">
          <div class="dash-title">üöö ‡∏Ñ‡∏¥‡∏ß‡∏à‡∏±‡∏î‡∏™‡πà‡∏á (‡∏£‡∏≠‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô)</div>
          <button class="btn btn-dark" onclick="window.closeDashboard()">
            ‡∏õ‡∏¥‡∏î
          </button>
        </div>
        <div style="overflow-x: auto">
          <table class="shipping-table">
            <thead>
              <tr>
                <th>‡∏•‡∏≥‡∏î‡∏±‡∏ö</th>
                <th>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ)</th>
                <th>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th>
                <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
              </tr>
            </thead>
            <tbody id="shipping-body"></tbody>
          </table>
        </div>
      </div>
      <div id="history-modal" class="dashboard-overlay">
        <div class="dashboard-header">
          <div class="dash-title">üïí ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÑ‡∏•‡∏ü‡πå</div>
          <button class="btn btn-dark" onclick="window.closeHistory()">
            ‡∏õ‡∏¥‡∏î
          </button>
        </div>
        <div style="padding: 10px">
          <input
            type="text"
            id="historySearchInput"
            class="history-search-box"
            placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏•‡∏ü‡πå..."
            onkeyup="window.filterHistory()"
          />
        </div>
        <div style="overflow-y: auto; flex: 1">
          <ul id="history-list" class="history-list"></ul>
        </div>
      </div>
    </div>
    <div id="print-area"></div>

    <script type="module" src="app.js"></script>
  </body>
</html>
